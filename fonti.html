<!DOCTYPE html>
<html lang="it"> <!-- lang attribute will be updated by JS -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=width=device-width, initial-scale=1.0">
    <meta name="description" content="Fonti e bibliografia utilizzate per la creazione dell'audioguida di Regalbuto.">
    <title>Fonti - Audioguida di Regalbuto</title>
    <link rel="icon" href="assets/img/favicon.png" type="image/png">

    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://audioguidaregalbuto.it/fonti.html">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Fonti - Audioguida di Regalbuto">
    <meta property="og:description" content="Fonti e bibliografia utilizzate per la creazione dell'audioguida di Regalbuto.">
    <meta property="og:image" content="https://audioguidaregalbuto.it/assets/img/social/index.jpg">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="audioguidaregalbuto.it">
    <meta property="twitter:url" content="https://audioguidaregalbuto.it/fonti.html">
    <meta name="twitter:title" content="Fonti - Audioguida di Regalbuto">
    <meta name="twitter:description" content="Fonti e bibliografia utilizzate per la creazione dell'audioguida di Regalbuto.">
    <meta name="twitter:image" content="https://audioguidaregalbuto.it/assets/img/social/index.jpg">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#6b46c1',
                            light: '#8b5cf6',
                            dark: '#5a2ca0',
                        },
                        secondary: '#3b82f6',
                        accent: '#10b981',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.7s ease-out',
                        'bounce-light': 'bounceLight 1s infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        bounceLight: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-5px)' },
                        }
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/components/header.css">
</head>
<body class="bg-gradient-to-b from-gray-50 to-white text-gray-800">
<!-- Skip link per accessibilitÃ  da tastiera -->
    <a href="#main-content" class="skip-to-content">Salta al contenuto principale</a>

    <header id="site-header" class="bg-white/90 backdrop-blur-xl sticky top-0 w-full z-40 border-b border-gray-100 shadow-sm" role="banner">
        <div class="container mx-auto px-4 md:px-6 lg:px-8 xl:px-12 max-w-7xl">
            <nav class="flex justify-between items-center h-16 md:h-20">
                <div class="flex items-center space-x-2">
                    <div class="text-primary text-2xl">
                        <i class="fas fa-compass" aria-hidden="true"></i>
                    </div>
                    <a href="index.html" class="text-xl font-semibold tracking-tight text-primary-dark">
                        Regalbuto
                        <span class="hidden sm:inline text-gray-500 font-normal">Audio Guida</span>
                    </a>
                </div>

                <div class="hidden md:flex items-center space-x-6 lg:space-x-8">
                    <a href="index.html#tour-timeline" class="nav-link text-sm font-medium text-gray-600 hover:text-primary transition-colors">Tappe</a>
                    <a href="mappa.html" class="nav-link text-sm font-medium text-gray-600 hover:text-primary transition-colors">Mappa</a>
                    <a href="fonti.html" class="nav-link text-sm font-medium text-primary transition-colors active">Fonti</a> <!-- Link attivo -->

                    <div class="language-selector relative inline-block">
                        <button id="language-button" class="flex items-center space-x-1 text-sm font-medium text-gray-600 hover:text-primary transition-all focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-md px-2 py-1" aria-expanded="false" aria-haspopup="true" aria-label="Seleziona lingua">
                            <i class="fas fa-language mr-1.5" aria-hidden="true"></i>
                            <span class="current-language">Italiano</span>
                            <i class="fas fa-chevron-down text-xs transition-transform duration-300" id="language-arrow" aria-hidden="true"></i>
                        </button>

                        <div id="language-dropdown" class="language-dropdown absolute right-0 mt-2 py-2 w-36 bg-white rounded-lg shadow-lg border border-gray-100 hidden z-50" role="menu" aria-labelledby="language-button">
                            <button class="language-option w-full text-left flex px-4 py-2 text-sm text-gray-700 hover:bg-primary/10 hover:text-primary transition-colors focus:outline-none focus:bg-primary/10 focus:text-primary" role="menuitem" data-lang="it">
                                <span class="w-4 mr-2" aria-hidden="true">ðŸ‡®ðŸ‡¹</span> Italiano
                            </button>
                            <button class="language-option w-full text-left flex px-4 py-2 text-sm text-gray-700 hover:bg-primary/10 hover:text-primary transition-colors focus:outline-none focus:bg-primary/10 focus:text-primary" role="menuitem" data-lang="en">
                                <span class="w-4 mr-2" aria-hidden="true">ðŸ‡¬ðŸ‡§</span> English
                            </button>
                            <button class="language-option w-full text-left flex px-4 py-2 text-sm text-gray-700 hover:bg-primary/10 hover:text-primary transition-colors focus:outline-none focus:bg-primary/10 focus:text-primary" role="menuitem" data-lang="de">
                                <span class="w-4 mr-2" aria-hidden="true">ðŸ‡©ðŸ‡ª</span> Deutsch
                            </button>
                            <button class="language-option w-full text-left flex px-4 py-2 text-sm text-gray-700 hover:bg-primary/10 hover:text-primary transition-colors focus:outline-none focus:bg-primary/10 focus:text-primary" role="menuitem" data-lang="es">
                                <span class="w-4 mr-2" aria-hidden="true">ðŸ‡ªðŸ‡¸</span> EspaÃ±ol
                            </button>
                            <button class="language-option w-full text-left flex px-4 py-2 text-sm text-gray-700 hover:bg-primary/10 hover:text-primary transition-colors focus:outline-none focus:bg-primary/10 focus:text-primary" role="menuitem" data-lang="fr">
                                <span class="w-4 mr-2" aria-hidden="true">ðŸ‡«ðŸ‡·</span> FranÃ§ais
                            </button>
                        </div>
                    </div>
                </div>

                <div class="flex items-center gap-4 md:hidden">
                    <button id="mobile-language-button" class="text-gray-700 hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-md p-1" aria-label="Cambia lingua">
                        <i class="fas fa-language text-xl" aria-hidden="true"></i>
                    </button>

                    <button id="mobile-menu-button" class="text-gray-700 hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-md p-1" aria-label="Menu" aria-expanded="false" aria-controls="mobile-menu" role="button">
                        <i class="fas fa-bars text-xl menu-icon" aria-hidden="true"></i>
                    </button>
                </div>
            </nav>
        </div>

        <div id="mobile-menu" class="mobile-menu" aria-hidden="true">
            <a href="index.html#tour-timeline" class="nav-link text-gray-700 hover:text-primary transition-colors">Tappe</a>
            <a href="mappa.html" class="nav-link text-gray-700 hover:text-primary transition-colors">Mappa</a>
            <a href="fonti.html" class="nav-link text-primary transition-colors active">Fonti</a> <!-- Link attivo -->

            <div class="flex justify-center gap-3 my-3 py-2 border-t border-b border-gray-100" role="group" aria-label="Selezione lingua">
                <button class="language-option-mobile w-10 h-10 rounded-full flex items-center justify-center text-sm border hover:border-primary focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" data-lang="it" aria-label="Italiano" aria-pressed="false">
                    <span aria-hidden="true">ðŸ‡®ðŸ‡¹</span>
                    <span class="sr-only">Italiano</span>
                </button>
                <button class="language-option-mobile w-10 h-10 rounded-full flex items-center justify-center text-sm border hover:border-primary focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" data-lang="en" aria-label="English" aria-pressed="false">
                    <span aria-hidden="true">ðŸ‡¬ðŸ‡§</span>
                    <span class="sr-only">English</span>
                </button>
                <button class="language-option-mobile w-10 h-10 rounded-full flex items-center justify-center text-sm border hover:border-primary focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" data-lang="de" aria-label="Deutsch" aria-pressed="false">
                    <span aria-hidden="true">ðŸ‡©ðŸ‡ª</span>
                    <span class="sr-only">Deutsch</span>
                </button>
                <button class="language-option-mobile w-10 h-10 rounded-full flex items-center justify-center text-sm border hover:border-primary focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" data-lang="es" aria-label="EspaÃ±ol" aria-pressed="false">
                    <span aria-hidden="true">ðŸ‡ªðŸ‡¸</span>
                    <span class="sr-only">EspaÃ±ol</span>
                </button>
                <button class="language-option-mobile w-10 h-10 rounded-full flex items-center justify-center text-sm border hover:border-primary focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-colors" data-lang="fr" aria-label="FranÃ§ais" aria-pressed="false">
                    <span aria-hidden="true">ðŸ‡«ðŸ‡·</span>
                    <span class="sr-only">FranÃ§ais</span>
                </button>
            </div>
        </div>
    </header>

    <main id="main-content" class="container mx-auto px-4 md:px-6 py-12 md:py-20 max-w-5xl">
        <div class="animate-slide-up">
            <div class="relative mb-16">
                <h1 class="text-4xl md:text-5xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-primary-dark via-primary to-secondary mb-4">Fonti e Bibliografia</h1>
                <p class="text-gray-600 text-center text-lg max-w-2xl mx-auto">Le risorse che hanno reso possibile la creazione di questa audioguida sulla storia e la cultura di Regalbuto</p>
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 -z-10 w-32 h-32 bg-primary/10 rounded-full blur-3xl opacity-70"></div>
            </div>

            <div class="grid md:grid-cols-2 gap-8 mb-12">
                <!-- Sezione libri -->
                <div class="bg-white rounded-xl shadow-lg p-7 border border-gray-100 transform transition-all duration-300 hover:shadow-xl hover:-translate-y-1 group">
                    <div class="flex items-center mb-6">
                        <div class="bg-primary/10 text-primary p-3 rounded-lg mr-4">
                            <i class="fas fa-book text-xl" aria-hidden="true"></i>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800 group-hover:text-primary transition-colors">Pubblicazioni</h2>
                    </div>
                    <ul class="space-y-5 list-none">
                        <li class="relative pl-6 before:content-[''] before:absolute before:left-0 before:top-2 before:w-2 before:h-2 before:bg-primary before:rounded-full">
                            <p class="text-gray-700">
                                <span class="font-medium text-gray-900 inline-block mb-1">Regalbuto: strade, storie, leggende, uomini ed eroi</span>
                                <br/>Francesco Miranda. - Roma : Ginevra Bentivoglio Editoria, c2011 (stampa 2012).
                            </p>
                        </li>
                        <li class="relative pl-6 before:content-[''] before:absolute before:left-0 before:top-2 before:w-2 before:h-2 before:bg-primary before:rounded-full">
                            <p class="text-gray-700">
                                <span class="font-medium text-gray-900 inline-block mb-1">Regalbuto, frammenti di un paese</span>
                                <br/>Francesco Santangelo. - Enna : Il Lunario, 2011.
                            </p>
                        </li>
                    </ul>
                </div>

                <!-- Sezione risorse online -->
                <div class="bg-white rounded-xl shadow-lg p-7 border border-gray-100 transform transition-all duration-300 hover:shadow-xl hover:-translate-y-1 group">
                    <div class="flex items-center mb-6">
                        <div class="bg-secondary/10 text-secondary p-3 rounded-lg mr-4">
                            <i class="fas fa-globe text-xl" aria-hidden="true"></i>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800 group-hover:text-secondary transition-colors">Risorse Online</h2>
                    </div>
                    <ul class="space-y-5 list-none">
                        <li class="relative pl-6 before:content-[''] before:absolute before:left-0 before:top-2 before:w-2 before:h-2 before:bg-secondary before:rounded-full">
                            <a href="https://www.comune.regalbuto.en.it/it/luoghi/chiesa-madre-s-basilio" 
                                target="_blank" 
                                rel="noopener noreferrer" 
                                class="text-gray-700 hover:text-secondary flex items-start group/link">
                                <span class="flex-grow">
                                    <span class="font-medium text-gray-900 group-hover/link:text-secondary inline-block mb-1">Chiesa Madre S. Basilio</span>
                                    <br/>Dal sito ufficiale del Comune di Regalbuto
                                </span>
                                <i class="fas fa-arrow-up-right-from-square text-secondary opacity-0 group-hover/link:opacity-100 transition-opacity ml-3 mt-1"></i>
                            </a>
                        </li>
                        <li class="relative pl-6 before:content-[''] before:absolute before:left-0 before:top-2 before:w-2 before:h-2 before:bg-secondary before:rounded-full">
                            <a href="https://www.comune.regalbuto.en.it/it/luoghi/municipio-del-comune-di-regalbuto" 
                                target="_blank" 
                                rel="noopener noreferrer" 
                                class="text-gray-700 hover:text-secondary flex items-start group/link">
                                <span class="flex-grow">
                                    <span class="font-medium text-gray-900 group-hover/link:text-secondary inline-block mb-1">Municipio del Comune di Regalbuto</span>
                                    <br/>Dal sito ufficiale del Comune di Regalbuto
                                </span>
                                <i class="fas fa-arrow-up-right-from-square text-secondary opacity-0 group-hover/link:opacity-100 transition-opacity ml-3 mt-1"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-md p-8 border border-gray-100 relative">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary to-secondary"></div>
                <div class="flex flex-col items-center">
                    <i class="fas fa-quote-right text-4xl text-primary/20 mb-4"></i>
                    <p class="text-gray-700 text-center italic max-w-2xl">
                        Si ringraziano sentitamente gli autori, le istituzioni e tutti coloro che hanno contribuito direttamente o indirettamente alla realizzazione di questa audioguida. Il loro impegno ha reso possibile la condivisione del ricco patrimonio culturale di Regalbuto.
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Placeholder per il footer dinamico -->
        <div id="footer-placeholder"></div>
    </main>

    <!-- Il footer viene inserito dinamicamente da footer-manager.js -->

    <script src="assets/js/language-manager.js"></script>
    <script src="assets/js/footer-manager.js"></script>
    <script src="assets/js/main.js"></script> <!-- Include main.js for header interactions -->
    <script>
        // Basic script to handle mobile menu and language selector if needed
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize header interactions from main.js if they are self-contained
            // Or copy necessary parts from index.html's inline script if main.js is not sufficient

            // Example: Mobile menu toggle (ensure IDs match)
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenuButton && mobileMenu) {
                 mobileMenuButton.addEventListener('click', function() {
                    const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
                    mobileMenuButton.setAttribute('aria-expanded', !isExpanded);
                    mobileMenu.setAttribute('aria-hidden', isExpanded);
                    mobileMenu.classList.toggle('open');
                    document.body.classList.toggle('overflow-hidden'); // Prevent scrolling when menu is open
                    mobileMenuButton.classList.toggle('menu-open');
                });

                 // Close menu when a link inside it is clicked
                 mobileMenu.addEventListener('click', function(event) {
                    if (event.target.tagName === 'A') {
                         mobileMenuButton.click(); // Simulate click to close
                    }
                 });
            }

            // Example: Language selector dropdown (ensure IDs match)
            const languageButton = document.getElementById('language-button');
            const languageDropdown = document.getElementById('language-dropdown');
            const languageArrow = document.getElementById('language-arrow');
            let isLanguageDropdownOpen = false;
            let clickEventListener = null;

            if (languageButton && languageDropdown) {
                languageButton.addEventListener('click', function(e) {
                    e.stopPropagation();
                    isLanguageDropdownOpen = !isLanguageDropdownOpen;
                    updateLanguageDropdownUI();
                });

                function updateLanguageDropdownUI() {
                    if (isLanguageDropdownOpen) {
                        languageButton.setAttribute('aria-expanded', 'true');
                        languageDropdown.classList.remove('hidden');
                        if(languageArrow) languageArrow.style.transform = 'rotate(180deg)';

                        if (!clickEventListener) {
                            clickEventListener = function(e) {
                                if (!languageDropdown.contains(e.target) && e.target !== languageButton) {
                                    isLanguageDropdownOpen = false;
                                    updateLanguageDropdownUI();
                                }
                            };
                            setTimeout(() => { document.addEventListener('click', clickEventListener); }, 10);
                        }
                    } else {
                        languageButton.setAttribute('aria-expanded', 'false');
                        languageDropdown.classList.add('hidden');
                         if(languageArrow) languageArrow.style.transform = '';

                        if (clickEventListener) {
                            document.removeEventListener('click', clickEventListener);
                            clickEventListener = null;
                        }
                    }
                }
            }

            // Initialize language manager if present and needed for header display
            if (window.LanguageManager) {
                 // Logic to set initial language display might be needed
                 // Add event listeners for language change buttons if LanguageManager handles it
                 const langOptions = document.querySelectorAll('.language-option, .language-option-mobile');
                 langOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        const lang = this.getAttribute('data-lang');
                        if (window.LanguageManager.changeLanguage) {
                            window.LanguageManager.changeLanguage(lang);
                            // Update UI based on language change if needed (e.g., button text)
                            const currentLanguageElement = document.querySelector('.current-language');
                             if (currentLanguageElement) {
                                 currentLanguageElement.textContent = getLanguageDisplayName(lang);
                             }
                             // Close dropdown after selection
                             if (isLanguageDropdownOpen) {
                                 isLanguageDropdownOpen = false;
                                 updateLanguageDropdownUI();
                             }
                             // Update mobile button states
                             document.querySelectorAll('.language-option-mobile').forEach(opt => {
                                 opt.setAttribute('aria-pressed', opt.getAttribute('data-lang') === lang);
                                 opt.classList.toggle('border-primary', opt.getAttribute('data-lang') === lang);
                                 opt.classList.toggle('bg-primary/10', opt.getAttribute('data-lang') === lang);
                             });
                        }
                    });
                 });

                 // Set initial state based on LanguageManager
                 const currentLang = window.LanguageManager.getCurrentLanguage ? window.LanguageManager.getCurrentLanguage() : 'it';
                 const currentLanguageElement = document.querySelector('.current-language');
                 if (currentLanguageElement) {
                     currentLanguageElement.textContent = getLanguageDisplayName(currentLang);
                 }
                 document.querySelectorAll('.language-option-mobile').forEach(opt => {
                     opt.setAttribute('aria-pressed', opt.getAttribute('data-lang') === currentLang);
                     opt.classList.toggle('border-primary', opt.getAttribute('data-lang') === currentLang);
                     opt.classList.toggle('bg-primary/10', opt.getAttribute('data-lang') === currentLang);
                 });
            }

            function getLanguageDisplayName(code) {
                const names = { 'it': 'Italiano', 'en': 'English', 'es': 'EspaÃ±ol', 'de': 'Deutsch', 'fr': 'FranÃ§ais' };
                return names[code] || code;
            }
        });
    </script>
</body>
</html>
